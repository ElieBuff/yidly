<script>
    var container = d3.select('#main .content').append('div').attr('class', 'task-container');
    function runAndSetInterval(func, timeout){
        func();
        setInterval(func, timeout);
    }
    runAndSetInterval(function(){
        $.ajax({
            url: 'tasks.json',
            success: function(tasks) {
                console.log(JSON.stringify(tasks));
                var divs = container.selectAll('div').data(tasks);

                divs.enter().append('div')
                .text(function(task) { 
                    return "action: " + task.action + " name: " + task.name;
                });

                divs.exit().remove();
                console.log(divs);
            }
        });
    }, 2000);
</script>
