<script>
    var container = d3.select('#main .content').append('div').attr('class', 'task-container');
    function runAndSetInterval(func, timeout){
        func();
        setInterval(func, timeout);
    }
    runAndSetInterval(function(){
        $.ajax({
            url: 'tasks.json',
            success: function(tasks) {
                console.log(JSON.stringify(tasks));
                var divs = container.selectAll('div').data(tasks);

                divs.enter().append('div')
                .attr('style', 'border-style:groove; border-width:3px; border-color:blue;')
                .text(function(task) { 
                    return task.action.toUpperCase() + "   " + task.name;
                });

                divs.exit().remove();
            }
        });
    }, 2000);
</script>
